## 인덱스

- 인덱스는 데이터를 빠르게 찾을 수 있는 하나의 장치
- 인덱스는 B-트리라는 자료 구조로 이루어져있음
- 인덱스는 효율적인 단계를 거쳐 모든 요소에 접근할 수 있는 균형 잡힌 트리 구조와 트리 깊이의 대수확장성 때문에 효율적이다
- 대수 확장성이란 트리 깊이가 리프 노드 수에 비해 매우 느리게 성장하는 것을 의미함
- 기본적으로 인덱스가 한 깊이씩 증가할 때마다 최대 인덱스 항목의 수는 4배씩 증가함

### 인덱스 만드는 방법

- MySQL
  - 클러스터형 인덱스
    - 테이블당 하나 설정 가능
    - primary key 옵션으로 기본키를 만들면 클러스터형 인덱스를 생성 가능
    - unique not null → 클러스터형 인덱스 생성 가능
  - 세컨더리 인덱스
    - create index 명령어를 통해 세컨더리 인덱스 생성 가능
    - 하나의 인덱스만 생성할 것이라면 클러스터형 인덱스를 만드는 것이 성능이 좋음
    - 보조 인덱스로 여러 개의 필드 값을 기반으로 쿼리를 많이 보낼 때 생성해야 하는 인덱스

### 인덱스 최적화 기법

1. 인덱스는 비용이다
2. 항상 테스팅 하라
3. 복합 인덱스는 같음, 정렬, 다중 값, 카디널리티 순
   1. 보통 여러 필드를 기반으로 조회를 할 때 복합 인덱스를 생성하는데, 이 인덱스를 생성할 때는 순서가 있고 생성 순서에 따라 인덱스 성능이 달라짐. 같음, 정렬, 다중 값, 카디널리티 순으로 생성해야함
      1. 어떠한 값과 같음을 비교하는 쿼리가 있다면 제일 먼저 인덱스로 설정
      2. 정렬에 쓰는 필드라면 그다음 인덱스로 설정
      3. 다중 값을 출력해야 하는 필드, 즉 쿼리 자체가 > 이거나 < 등 많은 값을 출력해야 하는 쿼리에 쓰는 필드라면 나중에 인덱스를 설정
      4. 유니크한 값의 정도를 카디널리티라고 함. 이 카디널리티가 높은 순서를 기반으로 인덱스를 생성
